import { useForm } from '../../hooks/useForm'

const initialFormValues = {
  email: 'algo@algo.com',
  password: '123456',
}

const formValidations = {
  email: [value => value.includes('@'), 'El correo debe de tener una @'],
  password: [
    value => value.length >= 6,
    'El password debe de tener más de 6 letras',
  ],
}

function LoginPage() {
  const {
    email,
    password,
    formValues,
    onInputChange,
    onResetForm,
    isFormValid,
  } = useForm(initialFormValues, formValidations)

  const handleSubmit = event => {
    event.preventDefault()

    console.log(formValues, isFormValid)
  }

  return (
    <>
      <main>
        <section>
          <h1>Iniciar sesión</h1>

          <form onSubmit={handleSubmit}>
            <div>
              <label htmlFor="txtEmail">Ingrese correo </label>
              <input
                id="txtEmail"
                type="text"
                placeholder="Ingrese correo"
                name="email"
                value={email}
                onChange={onInputChange}
                autoComplete="off"
                spellCheck="false"
              />
            </div>

            <div>
              <label htmlFor="txtPassword">Ingrese contraseña </label>
              <input
                id="txtPassword"
                type="password"
                placeholder="Ingrese contraseña"
                name="password"
                value={password}
                onChange={onInputChange}
                autoComplete="off"
                spellCheck="false"
              />
            </div>

            {!isFormValid && (
              <div>
                <br />
                <span>Formulario inválido.</span>
                <br />
              </div>
            )}

            <br />
            <div>
              <button
                type="submit"
                className={`${!isFormValid ? 'btn-disabled' : ''}`}
                disabled={!isFormValid}>
                Iniciar sesión
              </button>
            </div>
          </form>
        </section>
      </main>
    </>
  )
}

export default LoginPage
